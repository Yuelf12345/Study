{"remainingRequest":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\src\\components\\PreviewItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\src\\components\\PreviewItem.vue","mtime":1675735305147},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675735787205},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\babel-loader\\lib\\index.js","mtime":1675735787078},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675735787205},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\vue-loader\\lib\\index.js","mtime":1675735776133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBmZXRjaFVwbG9hZCB9IGZyb20gIkAvYXBpIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgcHJvcHM6IFsiZmlsZSJdLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBpbWdTcmM6ICIiLA0KICAgICAgcHJvZ3Jlc3M6IDANCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIOmAmui/h+S8oOi/h+adpeeahCBmaWxlIOe7mSBpbWdTcmMg6LWL5YC8DQogICAgY29uc3QgcmVuZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICByZW5kZXIub25sb2FkID0gKCkgPT4gew0KICAgICAgdGhpcy5pbWdTcmMgPSByZW5kZXIucmVzdWx0Ow0KICAgIH07DQogICAgcmVuZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlKTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIHNob3dQcm9ncmVzc1ZpZXcoKSB7DQogICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcyA+IDAgJiYgdGhpcy5wcm9ncmVzcyA8IDEwMDsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyB1cGxvYWRJbWcoKSB7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaFVwbG9hZCh0aGlzLmZpbGUsIChsb2FkZWQsIHRvdGFsKSA9PiB7DQogICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBNYXRoLmZsb29yKChsb2FkZWQgLyB0b3RhbCkgKiAxMDApOw0KICAgICAgfSk7DQogICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["PreviewItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PreviewItem.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"uploadPhotoItem\">\r\n    <span class=\"myProgress\" v-show=\"showProgressView\">\r\n      <span class=\"plan\" :style=\"{ width: progress + '%' }\"></span>\r\n      {{ progress }}%\r\n    </span>\r\n    <img :src=\"imgSrc\" />\r\n    <span class=\"pictureName\">\r\n      {{ file.name }}\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { fetchUpload } from \"@/api\";\r\nexport default {\r\n  props: [\"file\"],\r\n  data() {\r\n    return {\r\n      imgSrc: \"\",\r\n      progress: 0\r\n    };\r\n  },\r\n  created() {\r\n    // 通过传过来的 file 给 imgSrc 赋值\r\n    const render = new FileReader();\r\n    render.onload = () => {\r\n      this.imgSrc = render.result;\r\n    };\r\n    render.readAsDataURL(this.file);\r\n  },\r\n\r\n  computed: {\r\n    showProgressView() {\r\n      return this.progress > 0 && this.progress < 100;\r\n    }\r\n  },\r\n  methods: {\r\n    async uploadImg() {\r\n      const res = await fetchUpload(this.file, (loaded, total) => {\r\n        this.progress = Math.floor((loaded / total) * 100);\r\n      });\r\n      console.log(res);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"]}]}