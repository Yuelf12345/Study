{"remainingRequest":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\babel-loader\\lib\\index.js!C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\src\\store\\index.js","dependencies":[{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\src\\store\\index.js","mtime":1675735305149},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675735787205},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\babel-loader\\lib\\index.js","mtime":1675735787078},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\eslint-loader\\index.js","mtime":1675735785893}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1Z1ZS9ZL1hNL3RlYWNoaW5nLXZ1ZWpzL3BhY2thZ2VzL3Bob3RvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9WdWUvWS9YTS90ZWFjaGluZy12dWVqcy9wYWNrYWdlcy9waG90by9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKdmFyIF9tdXRhdGlvbnM7CgppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCBWdWV4IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBmZXRjaExvZ2luLCBmZXRjaFBob3RvcyBhcyBfZmV0Y2hQaG90b3MgfSBmcm9tICJAL2FwaSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKVnVlLnVzZShWdWV4KTsKdmFyIHR5cGVzID0gewogIExPR0lOOiAibG9naW4iLAogIFVQREFURV9QSE9UT1M6ICJ1cGRhdGVQaG90b3MiLAogIFVQREFURV9QQUdFOiAidXBkYXRlUGFnZSIKfTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikgfHwgIiIsCiAgICBwaG90b3M6IFtdLAogICAgcGFnZVNpemU6IDAsCiAgICBwYWdlVG90YWw6IDAKICB9LAogIGdldHRlcnM6IHsKICAgIGdldFBob3RvSXRlbUJ5SWQ6IGZ1bmN0aW9uIGdldFBob3RvSXRlbUJ5SWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpZCkgewogICAgICAgIHJldHVybiBzdGF0ZS5waG90b3MuZmluZChmdW5jdGlvbiAocGhvdG8pIHsKICAgICAgICAgIHJldHVybiBwaG90by5pZCA9PT0gaWQ7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IChfbXV0YXRpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCB0eXBlcy5MT0dJTiwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmKSB7CiAgICB2YXIgdG9rZW4gPSBfcmVmLnRva2VuOwogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsgLy8g5L+d5a2Y5YiwCgogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgdG9rZW4pOwogIH0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgdHlwZXMuVVBEQVRFX1BIT1RPUywgZnVuY3Rpb24gKHN0YXRlLCBfcmVmMikgewogICAgdmFyIHBob3RvcyA9IF9yZWYyLnBob3RvczsKICAgIHN0YXRlLnBob3RvcyA9IHBob3RvczsKICB9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIHR5cGVzLlVQREFURV9QQUdFLCBmdW5jdGlvbiAoc3RhdGUsIHBheWxvYWQpIHsKICAgIGNvbnNvbGUubG9nKHBheWxvYWQpOwogICAgc3RhdGUucGFnZVNpemUgPSBwYXlsb2FkLnByZXBhZ2U7CiAgICBzdGF0ZS5wYWdlVG90YWwgPSBwYXlsb2FkLnRvdGFsOwogIH0pLCBfbXV0YXRpb25zKSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZjMsIHBheWxvYWQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgdmFyIHVzZXJuYW1lID0gcGF5bG9hZC51c2VybmFtZSwKICAgICAgICAgIHBhc3N3b3JkID0gcGF5bG9hZC5wYXNzd29yZDsKICAgICAgZmV0Y2hMb2dpbih7CiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEudG9rZW4pIHsKICAgICAgICAgIGNvbW1pdCh0eXBlcy5MT0dJTiwgewogICAgICAgICAgICB0b2tlbjogcmVzLmRhdGEudG9rZW4KICAgICAgICAgIH0pOyAvLyBnbyB0byBIb21lLnZ1ZQoKICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogIkhvbWUiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoUGhvdG9zOiBmdW5jdGlvbiBmZXRjaFBob3RvcyhfcmVmNCwgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIHAsIF95aWVsZCRfZmV0Y2hQaG90b3MsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgICAgICAgICAgIHAgPSBwYXlsb2FkLnA7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfZmV0Y2hQaG90b3MocCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF95aWVsZCRfZmV0Y2hQaG90b3MgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRfZmV0Y2hQaG90b3MuZGF0YTsKICAgICAgICAgICAgICAgIGNvbW1pdCh0eXBlcy5VUERBVEVfUEhPVE9TLCB7CiAgICAgICAgICAgICAgICAgIHBob3RvczogZGF0YS5waG90b3MKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29tbWl0KHR5cGVzLlVQREFURV9QQUdFLCBkYXRhLnBhZ2UpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb2R1bGVzOiB7fQp9KTs="},{"version":3,"sources":["C:/Vue/Y/XM/teaching-vuejs/packages/photo/src/store/index.js"],"names":["Vue","Vuex","fetchLogin","fetchPhotos","router","use","types","LOGIN","UPDATE_PHOTOS","UPDATE_PAGE","Store","state","token","localStorage","getItem","photos","pageSize","pageTotal","getters","getPhotoItemById","id","find","photo","mutations","setItem","payload","console","log","prepage","total","actions","login","commit","username","password","then","res","data","push","name","p","page","modules"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\r\nimport Vuex from \"vuex\";\r\nimport { fetchLogin, fetchPhotos } from \"@/api\";\r\nimport router from \"../router\";\r\n\r\nVue.use(Vuex);\r\n\r\nconst types = {\r\n  LOGIN: \"login\",\r\n  UPDATE_PHOTOS: \"updatePhotos\",\r\n  UPDATE_PAGE: \"updatePage\"\r\n};\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    token: localStorage.getItem(\"token\") || \"\",\r\n    photos: [],\r\n    pageSize: 0,\r\n    pageTotal: 0\r\n  },\r\n\r\n  getters: {\r\n    getPhotoItemById(state) {\r\n      return id => {\r\n        return state.photos.find(photo => {\r\n          return photo.id === id;\r\n        });\r\n      };\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    [types.LOGIN](state, { token }) {\r\n      state.token = token;\r\n      // 保存到\r\n      localStorage.setItem(\"token\", token);\r\n    },\r\n    [types.UPDATE_PHOTOS](state, { photos }) {\r\n      state.photos = photos;\r\n    },\r\n    [types.UPDATE_PAGE](state, payload) {\r\n      console.log(payload);\r\n      state.pageSize = payload.prepage;\r\n      state.pageTotal = payload.total;\r\n    }\r\n  },\r\n  actions: {\r\n    login({ commit }, payload) {\r\n      const { username, password } = payload;\r\n      fetchLogin({ username, password }).then(res => {\r\n        if (res.data.token) {\r\n          commit(types.LOGIN, {\r\n            token: res.data.token\r\n          });\r\n          // go to Home.vue\r\n          router.push({\r\n            name: \"Home\"\r\n          });\r\n        }\r\n      });\r\n    },\r\n    async fetchPhotos({ commit }, payload) {\r\n      const { p } = payload;\r\n      const { data } = await fetchPhotos(p);\r\n      commit(types.UPDATE_PHOTOS, {\r\n        photos: data.photos\r\n      });\r\n      commit(types.UPDATE_PAGE, data.page);\r\n    }\r\n  },\r\n  modules: {}\r\n});\r\n"]}]}