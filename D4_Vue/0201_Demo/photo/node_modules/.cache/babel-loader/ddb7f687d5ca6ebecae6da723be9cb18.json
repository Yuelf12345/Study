{"remainingRequest":"C:\\Vue\\Y\\D4_Vue\\0201_Demo\\photo\\node_modules\\babel-loader\\lib\\index.js!C:\\Vue\\Y\\D4_Vue\\0201_Demo\\photo\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Vue\\Y\\D4_Vue\\0201_Demo\\photo\\src\\store\\index.js","dependencies":[{"path":"C:\\Vue\\Y\\D4_Vue\\0201_Demo\\photo\\src\\store\\index.js","mtime":1675740706189},{"path":"C:\\Vue\\Y\\D4_Vue\\0201_Demo\\photo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675735787205},{"path":"C:\\Vue\\Y\\D4_Vue\\0201_Demo\\photo\\node_modules\\babel-loader\\lib\\index.js","mtime":1675735787078},{"path":"C:\\Vue\\Y\\D4_Vue\\0201_Demo\\photo\\node_modules\\eslint-loader\\index.js","mtime":1675735785893}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1Z1ZS9ZL0Q0X1Z1ZS8wMjAxX0RlbW8vcGhvdG8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkM6L1Z1ZS9ZL0Q0X1Z1ZS8wMjAxX0RlbW8vcGhvdG8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCnZhciBfbXV0YXRpb25zOwoKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgVnVleCBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgZmV0Y2hMb2dpbiwgZmV0Y2hQaG90b3MgYXMgX2ZldGNoUGhvdG9zIH0gZnJvbSAiQC9hcGkiOwppbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlciI7ClZ1ZS51c2UoVnVleCk7CnZhciB0eXBlcyA9IHsKICBMT0dJTjogImxvZ2luIiwKICBVUERBVEVfUEhPVE9TOiAidXBkYXRlUGhvdG9zIiwKICBVUERBVEVfUEFHRTogInVwZGF0ZVBhZ2UiCn07CmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHsKICBzdGF0ZTogewogICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpIHx8ICIiLAogICAgcGhvdG9zOiBbXSwKICAgIHBhZ2VTaXplOiAwLAogICAgcGFnZVRvdGFsOiAwCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXRQaG90b0l0ZW1CeUlkOiBmdW5jdGlvbiBnZXRQaG90b0l0ZW1CeUlkKHN0YXRlKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoaWQpIHsKICAgICAgICByZXR1cm4gc3RhdGUucGhvdG9zLmZpbmQoZnVuY3Rpb24gKHBob3RvKSB7CiAgICAgICAgICByZXR1cm4gcGhvdG8uaWQgPT09IGlkOwogICAgICAgIH0pOwogICAgICB9OwogICAgfQogIH0sCiAgbXV0YXRpb25zOiAoX211dGF0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgdHlwZXMuTE9HSU4sIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZikgewogICAgdmFyIHRva2VuID0gX3JlZi50b2tlbjsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47IC8vIOS/neWtmOWIsAoKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIHRva2VuKTsKICB9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIHR5cGVzLlVQREFURV9QSE9UT1MsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjIpIHsKICAgIHZhciBwaG90b3MgPSBfcmVmMi5waG90b3M7CiAgICBzdGF0ZS5waG90b3MgPSBwaG90b3M7CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCB0eXBlcy5VUERBVEVfUEFHRSwgZnVuY3Rpb24gKHN0YXRlLCBwYXlsb2FkKSB7CiAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgIHN0YXRlLnBhZ2VTaXplID0gcGF5bG9hZC5wcmVwYWdlOwogICAgc3RhdGUucGFnZVRvdGFsID0gcGF5bG9hZC50b3RhbDsKICB9KSwgX211dGF0aW9ucyksCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYzLCBwYXlsb2FkKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIHZhciB1c2VybmFtZSA9IHBheWxvYWQudXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZCA9IHBheWxvYWQucGFzc3dvcmQ7CiAgICAgIGZldGNoTG9naW4oewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLnRva2VuKSB7CiAgICAgICAgICBjb21taXQodHlwZXMuTE9HSU4sIHsKICAgICAgICAgICAgdG9rZW46IHJlcy5kYXRhLnRva2VuCiAgICAgICAgICB9KTsgLy8gZ28gdG8gSG9tZS52dWUKCiAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJIb21lIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBmZXRjaFBob3RvczogZnVuY3Rpb24gZmV0Y2hQaG90b3MoX3JlZjQsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCBwLCBfeWllbGQkX2ZldGNoUGhvdG9zLCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgICAgICAgICAgICBwID0gcGF5bG9hZC5wOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2ZldGNoUGhvdG9zKHApOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfeWllbGQkX2ZldGNoUGhvdG9zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkX2ZldGNoUGhvdG9zLmRhdGE7CiAgICAgICAgICAgICAgICBjb21taXQodHlwZXMuVVBEQVRFX1BIT1RPUywgewogICAgICAgICAgICAgICAgICBwaG90b3M6IGRhdGEucGhvdG9zCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbW1pdCh0eXBlcy5VUERBVEVfUEFHRSwgZGF0YS5wYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW9kdWxlczoge30KfSk7"},{"version":3,"sources":["C:/Vue/Y/D4_Vue/0201_Demo/photo/src/store/index.js"],"names":["Vue","Vuex","fetchLogin","fetchPhotos","router","use","types","LOGIN","UPDATE_PHOTOS","UPDATE_PAGE","Store","state","token","localStorage","getItem","photos","pageSize","pageTotal","getters","getPhotoItemById","id","find","photo","mutations","setItem","payload","console","log","prepage","total","actions","login","commit","username","password","then","res","data","push","name","p","page","modules"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\r\nimport Vuex from \"vuex\";\r\nimport { fetchLogin, fetchPhotos } from \"@/api\";\r\nimport router from \"../router\";\r\n\r\nVue.use(Vuex);\r\n\r\nconst types = {\r\n  LOGIN: \"login\",\r\n  UPDATE_PHOTOS: \"updatePhotos\",\r\n  UPDATE_PAGE: \"updatePage\"\r\n};\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    token: localStorage.getItem(\"token\") || \"\",\r\n    photos: [],\r\n    pageSize: 0,\r\n    pageTotal: 0\r\n  },\r\n\r\n  getters: {\r\n    getPhotoItemById(state) {\r\n      return id => {\r\n        return state.photos.find(photo => {\r\n          return photo.id === id;\r\n        });\r\n      };\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    [types.LOGIN](state, { token }) {\r\n      state.token = token;\r\n      // 保存到\r\n      localStorage.setItem(\"token\", token);\r\n    },\r\n    [types.UPDATE_PHOTOS](state, { photos }) {\r\n      state.photos = photos;\r\n    },\r\n    [types.UPDATE_PAGE](state, payload) {\r\n      console.log(payload);\r\n      state.pageSize = payload.prepage;\r\n      state.pageTotal = payload.total;\r\n    }\r\n  },\r\n  actions: {\r\n    login({ commit }, payload) {\r\n      const { username, password } = payload;\r\n      fetchLogin({ username, password }).then(res => {\r\n        if (res.data.token) {\r\n          commit(types.LOGIN, {\r\n            token: res.data.token\r\n          });\r\n          // go to Home.vue\r\n          router.push({\r\n            name: \"Home\"\r\n          });\r\n        }\r\n      });\r\n    },\r\n    async fetchPhotos({ commit }, payload) {\r\n      const { p } = payload;\r\n      const { data } = await fetchPhotos(p);\r\n      commit(types.UPDATE_PHOTOS, {\r\n        photos: data.photos\r\n      });\r\n      commit(types.UPDATE_PAGE, data.page);\r\n    }\r\n  },\r\n  modules: {}\r\n});\r\n"]}]}