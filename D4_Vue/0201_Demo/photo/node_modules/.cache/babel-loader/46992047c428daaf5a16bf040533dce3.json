{"remainingRequest":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\babel-loader\\lib\\index.js!C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\src\\utils\\http.js","dependencies":[{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\src\\utils\\http.js","mtime":1675735305149},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675735787205},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\babel-loader\\lib\\index.js","mtime":1675735787078},{"path":"C:\\Vue\\Y\\XM\\teaching-vuejs\\packages\\photo\\node_modules\\eslint-loader\\index.js","mtime":1675735785893}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiOwppbXBvcnQgbnByb2dyZXNzIGZyb20gIm5wcm9ncmVzcyI7IC8vIOWMuuWIhuWdj+WigwovLyBwcm9jZXNzLmVudi5OT0RFX0VOVgoKdmFyIG15QXhpb3MgPSBheGlvcy5jcmVhdGUoewogIHRpbWVvdXQ6IDgwMDAsCiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICJkZXZlbG9wbWVudCIgPyAiL2FwaSIgOiAiaHR0cDovL2xvY2FsaG9zdDo4MDgxLyIKfSk7IC8vIOivt+axguaLpuaIquWZqAoKbXlBeGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIOiuvue9riB0b2tlbgogIC8vIGp3dAogIHZhciB0b2tlbiA9IHN0b3JlLnN0YXRlLnRva2VuOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLmF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIgKyB0b2tlbjsKICB9IC8vIOaYvuekuui/m+W6puadoQoKCiAgbnByb2dyZXNzLnN0YXJ0KCk7CiAgcmV0dXJuIGNvbmZpZzsKfSk7IC8vIOWTjeW6lOaLpuaIquWZqAoKbXlBeGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICBpZiAocmVzLmRhdGEuc3RhdGUgPT09IDApIHsKICAgIC8vIOmUmeivrwogICAgLy8g5omT5Y2wIG1zZwogICAgVnVlLnByb3RvdHlwZS4kbWVzc2FnZSh7CiAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgIG1lc3NhZ2U6IHJlcy5kYXRhLm1zZwogICAgfSk7CiAgfSAvLyDpmpDol4/ov5vluqbmnaEKCgogIG5wcm9ncmVzcy5kb25lKCk7CiAgcmV0dXJuIHJlcy5kYXRhOwp9LCBmdW5jdGlvbiAoZSkgewogIHZhciBzdGF0dXMgPSBlLnJlc3BvbnNlLnN0YXR1czsKCiAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7CiAgICAvLyDmnYPpmZDpl67popgKICAgIC8vIOiwg+aVtOWIsOeZu+W9lemhtemdogogICAgLy8gICBjb25zb2xlLmxvZyhWdWUucHJvdG90eXBlKTsKICAgIC8vICAgVnVlLnByb3RvdHlwZS4kcm91dGVyLnJlcGxhY2UoewogICAgLy8gICAgIG5hbWU6ICJMb2dpbiIKICAgIC8vICAgfSk7CiAgICAvLyDnu5nkuIDkupvmj5DnpLrllYoKICAgIHJvdXRlci5yZXBsYWNlKHsKICAgICAgbmFtZTogIkxvZ2luIgogICAgfSk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgbXlBeGlvczs="},{"version":3,"sources":["C:/Vue/Y/XM/teaching-vuejs/packages/photo/src/utils/http.js"],"names":["axios","Vue","router","store","nprogress","myAxios","create","timeout","baseURL","process","env","NODE_ENV","interceptors","request","use","config","token","state","headers","authorization","start","response","res","data","prototype","$message","type","message","msg","done","e","status","replace","name"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,SAAP,MAAsB,WAAtB,C,CAEA;AACA;;AAEA,IAAMC,OAAO,GAAGL,KAAK,CAACM,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAE,IADkB;AAE3BC,EAAAA,OAAO,EACLC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,GAAyC,MAAzC,GAAkD;AAHzB,CAAb,CAAhB,C,CAMA;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACzC;AACA;AACA,MAAMC,KAAK,GAAGb,KAAK,CAACc,KAAN,CAAYD,KAA1B;;AACA,MAAIA,KAAJ,EAAW;AACTD,IAAAA,MAAM,CAACG,OAAP,CAAeC,aAAf,GAA+B,YAAYH,KAA3C;AACD,GANwC,CAQzC;;;AACAZ,EAAAA,SAAS,CAACgB,KAAV;AAEA,SAAOL,MAAP;AACD,CAZD,E,CAcA;;AACAV,OAAO,CAACO,YAAR,CAAqBS,QAArB,CAA8BP,GAA9B,CACE,UAAAQ,GAAG,EAAI;AACL,MAAIA,GAAG,CAACC,IAAJ,CAASN,KAAT,KAAmB,CAAvB,EAA0B;AACxB;AACA;AACAhB,IAAAA,GAAG,CAACuB,SAAJ,CAAcC,QAAd,CAAuB;AACrBC,MAAAA,IAAI,EAAE,OADe;AAErBC,MAAAA,OAAO,EAAEL,GAAG,CAACC,IAAJ,CAASK;AAFG,KAAvB;AAID,GARI,CAUL;;;AACAxB,EAAAA,SAAS,CAACyB,IAAV;AACA,SAAOP,GAAG,CAACC,IAAX;AACD,CAdH,EAeE,UAAAO,CAAC,EAAI;AAAA,MACKC,MADL,GACgBD,CAAC,CAACT,QADlB,CACKU,MADL;;AAGH,MAAIA,MAAM,KAAK,GAAf,EAAoB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA7B,IAAAA,MAAM,CAAC8B,OAAP,CAAe;AACbC,MAAAA,IAAI,EAAE;AADO,KAAf;AAGD;AACF,CA9BH;AAiCA,eAAe5B,OAAf","sourcesContent":["import axios from \"axios\";\r\nimport Vue from \"vue\";\r\nimport router from \"../router\";\r\nimport store from \"../store\";\r\nimport nprogress from \"nprogress\";\r\n\r\n// 区分坏境\r\n// process.env.NODE_ENV\r\n\r\nconst myAxios = axios.create({\r\n  timeout: 8000,\r\n  baseURL:\r\n    process.env.NODE_ENV === \"development\" ? \"/api\" : \"http://localhost:8081/\"\r\n});\r\n\r\n// 请求拦截器\r\nmyAxios.interceptors.request.use(config => {\r\n  // 设置 token\r\n  // jwt\r\n  const token = store.state.token;\r\n  if (token) {\r\n    config.headers.authorization = \"Bearer \" + token;\r\n  }\r\n\r\n  // 显示进度条\r\n  nprogress.start();\r\n\r\n  return config;\r\n});\r\n\r\n// 响应拦截器\r\nmyAxios.interceptors.response.use(\r\n  res => {\r\n    if (res.data.state === 0) {\r\n      // 错误\r\n      // 打印 msg\r\n      Vue.prototype.$message({\r\n        type: \"error\",\r\n        message: res.data.msg\r\n      });\r\n    }\r\n\r\n    // 隐藏进度条\r\n    nprogress.done();\r\n    return res.data;\r\n  },\r\n  e => {\r\n    const { status } = e.response;\r\n\r\n    if (status === 401) {\r\n      // 权限问题\r\n      // 调整到登录页面\r\n      //   console.log(Vue.prototype);\r\n      //   Vue.prototype.$router.replace({\r\n      //     name: \"Login\"\r\n      //   });\r\n      // 给一些提示啊\r\n      router.replace({\r\n        name: \"Login\"\r\n      });\r\n    }\r\n  }\r\n);\r\n\r\nexport default myAxios;\r\n"]}]}